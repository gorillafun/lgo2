package main

import (
	"fmt"
	"time"
)

func main() {
	// 1. å®¹é‡ã€Œ2ã€ã®ãƒãƒƒãƒ•ã‚¡ä»˜ããƒãƒ£ãƒãƒ«ã‚’ä½œæˆï¼ˆã“ã‚ŒãŒéƒµä¾¿å—ã‘ï¼‰
	// make(chan å‹, å®¹é‡)
	mailbox := make(chan string, 2) // [cite: 2572]

	// é€ä¿¡ä¿‚ï¼ˆã‚´ãƒ«ãƒ¼ãƒãƒ³ï¼‰
	go func() {
		fmt.Println("ğŸ“® 1é€šç›®ã‚’å…¥ã‚Œã¾ã™...")
		mailbox <- "æ‰‹ç´™1" // ã™ãå…¥ã‚‹
		fmt.Println("âœ… 1é€šç›®ã€æŠ•å‡½å®Œäº†ï¼")

		fmt.Println("ğŸ“® 2é€šç›®ã‚’å…¥ã‚Œã¾ã™...")
		mailbox <- "æ‰‹ç´™2" // ã¾ã ç©ºããŒã‚ã‚‹ã®ã§ã€ã™ãå…¥ã‚‹
		fmt.Println("âœ… 2é€šç›®ã€æŠ•å‡½å®Œäº†ï¼")

		// â˜…ã“ã“ã§æ³¨ç›®ï¼
		fmt.Println("ğŸ“® 3é€šç›®ã‚’å…¥ã‚Œã¾ã™...ï¼ˆãƒã‚¹ãƒˆã¯æº€æ¯ã§ã™ï¼‰")
		mailbox <- "æ‰‹ç´™3" // ã“ã“ã§æ­¢ã¾ã‚‹ï¼ˆãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã‚‹ï¼‰ã¯ãšï¼ 
		fmt.Println("âœ… 3é€šç›®ã€æŠ•å‡½å®Œäº†ï¼ï¼ˆã‚„ã£ã¨å…¥ã£ãŸï¼ï¼‰")
	}()

	// å—ä¿¡ä¿‚ï¼ˆãƒ¡ã‚¤ãƒ³é–¢æ•°ï¼‰
	// ã‚ã–ã¨é…ã‚Œã¦å–ã‚Šã«è¡Œãã¾ã™
	time.Sleep(time.Second * 3)
	fmt.Println("\nğŸƒâ€â™‚ï¸ --- 3ç§’å¾Œã€å—ä¿¡ä¿‚ãŒãƒã‚¹ãƒˆã‚’è¦‹ã«æ¥ã¾ã—ãŸ ---")

	// 1é€šå–ã‚Šå‡ºã™
	msg := <-mailbox
	fmt.Println("ğŸ“© å—ä¿¡ã—ã¾ã—ãŸ:", msg)

	// ã“ã“ã§ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒçµ‚ã‚ã‚‰ãªã„ã‚ˆã†ã«å°‘ã—å¾…ã¤
	time.Sleep(time.Second * 1)
}